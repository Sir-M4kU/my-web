---
import ProjectArticles from './ProjectArticles.astro'
import { useTranslations, getLangFromUrl } from '../i18n/utils'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)

const { projects: personalProjects } = await import('../mocks/personal-projects.json')
const { projects: otherProjects } = await import('../mocks/other-projects.json')
---

<section class="flex flex-col mx-4 sm:mx-0 sm:grid sm:gap-8 place-items-center pt-24" id="projects">
  <header class="mb-4">
    <h2 class="font-barlow my-4 text-center text-5xl text-blue-400">
      {t('projects.header.h2')}
    </h2>
    <p class="text-center">
      {t('projects.header.p')}
    </p>
  </header>
  <main class="w-full">
    <section>
      <h2 class="text-2xl text-blue-400 font-barlow text-center mb-6">
        {t('projects.main.h2')}
      </h2>
      <div class="flex flex-col sm:grid sm:grid-cols-2 justify-items-center gap-4">
        {
          personalProjects.map(project => (
            <ProjectArticles
                title={project.title}
                description={project.description}
                link={project.link}
            />
          ))
        }
      </div>
    </section>
    <div class="bg-gray-500 p-1 my-8 rounded-full"></div>
    <section>
      <h2 class="text-2xl text-blue-400 font-barlow text-center mb-6">
        {t('projects.main.h2-2')}
      </h2>
      <div class="flex flex-col sm:grid sm:grid-cols-2 justify-items-center gap-4">
        {
          otherProjects.map(project => (
            <ProjectArticles
                title={project.title}
                description={project.description}
                link={project.link}
            />
          ))
        }
      </div>
    </section>
  </main>
</section>
